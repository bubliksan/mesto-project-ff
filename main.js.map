{"version":3,"file":"main.js","mappings":"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","sources":["webpack://mesto-project-ff/./src/scripts/api_config.js","webpack://mesto-project-ff/./src/scripts/validation_options.js","webpack://mesto-project-ff/./src/components/card.js","webpack://mesto-project-ff/./src/components/modal.js","webpack://mesto-project-ff/./src/components/validation.js","webpack://mesto-project-ff/./src/components/api.js","webpack://mesto-project-ff/./src/index.js"],"sourcesContent":["export const apiConfig = {\r\n    baseUrl: 'https://mesto.nomoreparties.co/v1/wff-cohort-29',\r\n    headers: {\r\n        authorization: '16401e6c-35b8-4783-8b7e-d7c1e645cdd4',\r\n        'Content-Type': 'application/json' \r\n    },\r\n    id: 'dc464caf488af377d2058b30'\r\n}","export const validationOptions = {\r\n  formSelector: '.popup__form',\r\n  inputSelector: '.popup__input',\r\n  submitButtonSelector: '.popup__button',\r\n  inactiveButtonClass: 'popup__button_disabled',\r\n  inputErrorClass: 'popup__input_type_error',\r\n  errorClass: 'form__input_error_visible'\r\n}","// Функция создания карточки\r\n\r\nexport function createCard(card, cardFunc, config) {\r\n  const placeTemplate = document.querySelector('#card-template').content; // Берём содержимое шаблона\r\n  const placeElement = placeTemplate.querySelector('.places__item').cloneNode(true); //клонируем\r\n  const cardImage = placeElement.querySelector('.card__image');\r\n  const deleteCardButton = placeElement.querySelector('.card__delete-button');\r\n  cardImage.src = card.link; // Наполняем\r\n  cardImage.alt = card.name;\r\n  placeElement.querySelector('.card__like-count').textContent = card.likes.length;\r\n  placeElement.querySelector('.card__title').textContent = card.name;\r\n  if(checkLike(card, config)) {\r\n    placeElement.querySelector('.card__like-button').classList.add('card__like-button_is-active');\r\n  }\r\n  if (card.owner._id === config.id) {\r\n    deleteCardButton.classList.remove('card__delete-button-hidden');\r\n    deleteCardButton.addEventListener('click', (evt) => cardFunc.delete(card._id, evt)); //Обработчик из функции удаления\r\n  }\r\n  placeElement.querySelector('.card__like-button').addEventListener('click', (evt) => cardFunc.like(card._id, evt));\r\n  cardImage.addEventListener('click', cardFunc.popup);\r\n  return(placeElement);\r\n}\r\n\r\n// Функция проверки своего лайка в карточке\r\n\r\nfunction checkLike(card, config) {\r\n  let result = false\r\n  card.likes.forEach((item) => {\r\n    if(item._id === config.id) {\r\n      result = true;      \r\n    }\r\n  })\r\n  return result;\r\n}\r\n\r\n// Функция лайка в карточке\r\n\r\nexport function likeCard(likesNumber, evt) {\r\n  const likeButton = evt.target;\r\n  likeButton.nextElementSibling.textContent = likesNumber;\r\n  likeButton.classList.toggle('card__like-button_is-active');\r\n}\r\n\r\n// Функция удаления карточки\r\n\r\nexport function deletePlace(evt) {\r\n  const deleteButton = evt.target;\r\n  const place = deleteButton.closest('.places__item');\r\n  place.remove();\r\n}","// Функция закрытия попапа\r\n\r\nexport function hidePopup(itemPopup) {\r\n  itemPopup.classList.remove('popup_is-opened');\r\n  document.removeEventListener('keydown', pushButtonListener);\r\n}\r\n  \r\n// Функция открытия попапа\r\n  \r\nexport function showPopup(popup) {\r\n  popup.classList.add('popup_is-opened');\r\n  document.addEventListener('keydown', pushButtonListener);\r\n}\r\n\r\n// Функция слушателя нажатия клавиши для попапа\r\n\r\nexport function pushButtonListener(evt) {\r\n  if (evt.key == 'Escape') {\r\n    const openedPopup = document.querySelector('.popup_is-opened');\r\n    hidePopup(openedPopup);\r\n  }\r\n}","// Выбираем все формы и для каждой вызываем утановку слушателя\r\n\r\nexport function enableValidation(validationOptions) {\r\n    const formList = Array.from(document.querySelectorAll(validationOptions.formSelector));\r\n      formList.forEach((formElement) => {\r\n      setEventListeners(formElement, validationOptions);\r\n    });\r\n}\r\n\r\n// Очитска валидации и установка кнопки в неактивное состояние\r\n\r\nexport function clearValidation(formElement, validationOptions) {    \r\n    const formElements = getFormElements(formElement, validationOptions);\r\n    formElements.list.forEach((inputElement) => {\r\n        hideInputError(inputElement, formElement, validationOptions);\r\n    })\r\n    formElements.button.disabled = true;\r\n    formElements.button.classList.add(validationOptions.inactiveButtonClass);\r\n\r\n}\r\n\r\n// Функция возвращает массив с элементами формы\r\n\r\nfunction getFormElements(formElement, validationOptions) {\r\n    const inputList = Array.from(formElement.querySelectorAll(validationOptions.inputSelector));\r\n    const buttonElement = formElement.querySelector(validationOptions.submitButtonSelector);\r\n    return {list: inputList, button: buttonElement};\r\n}\r\n\r\n// Для каждого input в форме вешаем слушатель, отключаем кнопку\r\n\r\nfunction setEventListeners(formElement, validationOptions) {\r\n    const formElements = getFormElements(formElement, validationOptions);\r\n    formElements.list.forEach((inputElement) => {\r\n      inputElement.addEventListener('input', () => {\r\n        isValid(formElement, inputElement, validationOptions);\r\n        toggleButtonState(formElements.list, formElements.button, validationOptions);\r\n      });\r\n    });\r\n}\r\n\r\n// Переключение состояния кнопки, в зависимости от валидации\r\n\r\nfunction toggleButtonState(inputList, buttonElement, validationOptions) {\r\n    if (hasInvalidInput(inputList)) {\r\n        buttonElement.disabled = true;\r\n        buttonElement.classList.add(validationOptions.inactiveButtonClass);\r\n    } else {\r\n        buttonElement.disabled = false;\r\n        buttonElement.classList.remove(validationOptions.inactiveButtonClass);\r\n    }\r\n}\r\n\r\n// Функция валидации элемента\r\n\r\nfunction isValid(formElement, inputElement, validationOptions) {\r\n    if (inputElement.validity.patternMismatch) {\r\n        inputElement.setCustomValidity(inputElement.dataset.errorMessage);\r\n    } else {\r\n        inputElement.setCustomValidity('');\r\n    }\r\n    if (!inputElement.validity.valid) {\r\n        showInputError(inputElement, formElement, inputElement.validationMessage, validationOptions);\r\n    } else {\r\n        hideInputError(inputElement, formElement, validationOptions);\r\n    }\r\n}\r\n\r\n// Отображение ошибки валидации и изменение внешнего вида\r\n\r\nfunction showInputError(inputElement, formElement, errorMessage, validationOptions) {\r\n    const errorElement = formElement.querySelector(`.${inputElement.id}_error`);\r\n    inputElement.classList.add(validationOptions.inputErrorClass);\r\n    errorElement.classList.add(validationOptions.errorClass);\r\n    errorElement.textContent = errorMessage;    \r\n}\r\n\r\n// Скрытие ошибки валидации и отображение внешнего вида\r\n\r\nfunction hideInputError(inputElement, formElement, validationOptions) {\r\n    const errorElement = formElement.querySelector(`.${inputElement.id}_error`);\r\n    inputElement.classList.remove(validationOptions.inputErrorClass);\r\n    errorElement.classList.remove(validationOptions.errorClass);\r\n    errorElement.textContent = '';\r\n}\r\n\r\n// Проверка валидации полей для сосотояния кнопки\r\n\r\nfunction hasInvalidInput(inputList) {\r\n    return inputList.some((inputElement) => {\r\n        return !inputElement.validity.valid;\r\n    })\r\n}","const handleResponse = (res) => {\r\n    if (res.ok) {\r\n        return res.json();\r\n    }\r\n   return Promise.reject(`Ошибка!: ${res.status}`); \r\n}\r\n\r\n// Запрос к серверу на загрузку данных профиля\r\n\r\nexport function getProfile(config) {\r\n    return fetch(`${config.baseUrl}/users/me`, {\r\n        headers: {\r\n            authorization: config.headers.authorization\r\n        }\r\n    })\r\n    .then(handleResponse)\r\n}\r\n\r\n// Запрос к серверу на обновление данных профиля \r\n\r\nexport function editProfile(namePr, descriptionPr, config) {\r\n    return fetch(`${config.baseUrl}/users/me`, {\r\n        method: 'PATCH',\r\n        headers: config.headers,\r\n        body: JSON.stringify({\r\n            name: `${namePr.value}`,\r\n            about: `${descriptionPr.value}`\r\n        })\r\n    })\r\n    .then(handleResponse)\r\n}\r\n\r\n// Запрос к серверу на загрузку карточек\r\n\r\nexport function getCards(config) {\r\n    return fetch(`${config.baseUrl}/cards`, {\r\n        headers: {\r\n            authorization: config.headers.authorization\r\n        }\r\n    })\r\n    .then(handleResponse)\r\n}\r\n\r\n// Запрос к серверу на добавление карточки\r\n\r\nexport function sendCard(newCard, config) {\r\n    return fetch(`${config.baseUrl}/cards`, {\r\n        method: 'POST',\r\n        headers: config.headers,\r\n        body: JSON.stringify({\r\n            name: `${newCard.name}`,\r\n            link: `${newCard.link}`\r\n        })\r\n    })\r\n    .then(handleResponse)\r\n}\r\n\r\n// Запрос к серверу на удаление карточки\r\n\r\nexport function deleteCard(cardId, config) {\r\n    return fetch(`${config.baseUrl}/cards/${cardId}`, {\r\n        method: 'DELETE',        \r\n        headers: config.headers,\r\n    })\r\n    .then(handleResponse)\r\n}\r\n\r\n// Запрос к серверу на установку лайка\r\n\r\nexport function sendLike(cardId, config) {\r\n    return fetch(`${config.baseUrl}/cards/likes/${cardId}`, {\r\n        method: 'PUT',        \r\n        headers: config.headers,\r\n    })\r\n    .then(handleResponse)\r\n}\r\n\r\n// Запрос к серверу на снятие лайка\r\n\r\nexport function removeLike(cardId, config) {\r\n    return fetch(`${config.baseUrl}/cards/likes/${cardId}`, {\r\n        method: 'DELETE',        \r\n        headers: config.headers,\r\n    })\r\n    .then(handleResponse)\r\n}\r\n\r\n// Запрос к серверу на изменение аватара\r\n\r\nexport function editAvatar(link, config) {\r\n    return fetch(`${config.baseUrl}/users/me/avatar`, {\r\n        method: 'PATCH',\r\n        headers: config.headers,\r\n        body: JSON.stringify({\r\n            avatar: `${link}`\r\n        })\r\n    })\r\n    .then(handleResponse)\r\n}","// @todo: Темплейт карточки\r\n\r\n// @todo: DOM узлы\r\n\r\n// @todo: Функция создания карточки\r\n\r\n// @todo: Функция удаления карточки\r\n\r\n// @todo: Вывести карточки на страницу\r\n\r\nimport './index.css';\r\nimport { apiConfig } from './scripts/api_config.js';\r\nimport { validationOptions } from './scripts/validation_options.js';\r\nimport { createCard, likeCard, deletePlace } from './components/card.js';\r\nimport { hidePopup, showPopup } from './components/modal.js';\r\nimport { enableValidation, clearValidation } from './components/validation.js';\r\nimport { getProfile,\r\n  editProfile,\r\n  getCards,\r\n  sendCard,\r\n  deleteCard,\r\n  sendLike,\r\n  removeLike,\r\n  editAvatar } from './components/api.js';\r\nconst editProfileButton = document.querySelector('.profile__edit-button');\r\nconst addCardButton = document.querySelector('.profile__add-button');\r\nconst placesList = document.querySelector('.places__list');\r\nconst editItemPopup = document.querySelector('.popup_type_edit');\r\nconst editAvatarPopup = document.querySelector('.popup_type_new-avatar');\r\nconst editItemAdd = document.querySelector('.popup_type_new-card');\r\nconst deleteItemPopup = document.querySelector('.popup_type_delete-card');\r\nconst cardImagePopup = document.querySelector('.popup_type_image');\r\nlet modifiedCardId = null;\r\nlet modifiedCardTargetButton = null;\r\nconst cardImage = cardImagePopup.querySelector('.popup__image');\r\nconst cardCaption = cardImagePopup.querySelector('.popup__caption');\r\nconst profileTitle = document.querySelector('.profile__title');\r\nconst profileDescr = document.querySelector('.profile__description');\r\nconst profileImage = document.querySelector('.profile__image');\r\nconst allPopups = document.querySelectorAll('.popup');\r\nconst addForm = document.forms['new-place'];\r\nconst editForm = document.forms['edit-profile'];\r\nconst deleteForm = document.forms['delete-card'];\r\nconst changeAvatarForm = document.forms['new-avatar'];\r\nconst nameInput = editForm.elements.name;\r\nconst descrInput = editForm.elements.description;\r\nconst cardFunctions = {delete: handleDeletePlace, like: handleLikePlace, popup: handleImageClick}\r\nconst handleError = (err) => {console.log(`Ошибка!: ${err}`)}\r\n\r\n// Функция добавления новой карточки\r\n\r\nfunction addCard(evt) {\r\n  const newCard = {};\r\n  const placeInput = addForm.elements['place-name'];\r\n  const urlInput = addForm.elements.link;        \r\n  evt.preventDefault();\r\n  addForm.elements['submit-button'].textContent = 'Сохранение...';\r\n  newCard.name = placeInput.value;\r\n  newCard.link = urlInput.value;\r\n  newCard.descr = placeInput.value;\r\n  newCard.owner = {_id: apiConfig.id}; // для определения владельца карточки\r\n  sendCard(newCard, apiConfig)\r\n  .then((data) => {\r\n    renderCard(data, 'prepend');\r\n    hidePopup(editItemAdd);\r\n  })\r\n  .catch(handleError)\r\n  .finally(() => {     \r\n    changeSubmitButton(editItemAdd);\r\n  })\r\n  addForm.reset();\r\n}\r\n\r\n// Обработчик удаления карточки\r\n\r\nfunction handleDeletePlace(id, evt) {\r\n  modifiedCardTargetButton = evt;\r\n  modifiedCardId = id;\r\n  showPopup(deleteItemPopup);\r\n}\r\n\r\n// Обработчик лайка в карточке\r\n\r\nfunction handleLikePlace(id, evt) {\r\n  modifiedCardId = id;\r\n  modifiedCardTargetButton = evt;\r\n  if (evt.target.classList.contains('card__like-button_is-active')) {\r\n    removeLike(modifiedCardId, apiConfig)    \r\n    .catch(handleError)\r\n    .then((data) => {\r\n      likeCard(data.likes.length, modifiedCardTargetButton);\r\n      evt.target.classList.remove('card__like-button_is-active');\r\n    })\r\n  } else {\r\n    sendLike(modifiedCardId, apiConfig)    \r\n    .catch(handleError)\r\n    .then((data) => {\r\n        likeCard(data.likes.length , modifiedCardTargetButton);\r\n    })\r\n  }\r\n}\r\n\r\n// Функция отрисовки карточек\r\n\r\nfunction renderCard(item, method='append') {\r\n  const cardElement = createCard(item, cardFunctions, apiConfig);\r\n  placesList[method](cardElement);\r\n}\r\n\r\n// функция открытия попапа с картинкой в карточке\r\n\r\nfunction handleImageClick(evt) {\r\n  const currentCard = evt.target.closest('.places__item');\r\n  const cardName = currentCard.querySelector('.card__description');\r\n  cardImage.src = evt.target.src;  // добавить ссылку на картинку\r\n  cardImage.alt = evt.target.alt;  \r\n  cardCaption.innerText = cardName.innerText;  // добавить текст подписи к картинке\r\n  showPopup(cardImagePopup);  // показать попап с картинкой и текстом\r\n}\r\n\r\n// Функция возвращения надписи кнопки после ответа сервера\r\n\r\nfunction changeSubmitButton(itemPopup) {\r\n  setTimeout(() => {\r\n    const submitButton = itemPopup.querySelector('.popup__button');\r\n      if (itemPopup.classList.contains('popup_type_edit') || \r\n      itemPopup.classList.contains('popup_type_new-card') ||\r\n      itemPopup.classList.contains('popup_type_new-avatar')) {\r\n        submitButton.textContent = 'Сохранить';\r\n      }\r\n  }, 2000)  \r\n}\r\n\r\n// Запускаем всё\r\n\r\nPromise.all([\r\n  getProfile(apiConfig),\r\n  getCards(apiConfig)\r\n])\r\n.then(([getProfileData, getCardsData]) => {\r\n  profileTitle.textContent = getProfileData.name;\r\n  profileDescr.textContent = getProfileData.about;\r\n  profileImage.setAttribute('style', `background-image: url(${getProfileData.avatar})`);\r\n  apiConfig.id = getProfileData._id; // сохраняем id себя, как пользователя\r\n  getCardsData.forEach((item) => {\r\n    renderCard(item);\r\n  });\r\n})\r\n.catch(handleError) \r\n\r\n// Запускаем валидацию форм\r\n\r\nenableValidation(validationOptions);\r\n\r\n// Вешаем обработчик кликов закрытия на формы (вариант)\r\n\r\nallPopups.forEach(function(item) {\r\n  item.addEventListener('click', function(evt) {\r\n    if ((evt.target.classList.contains('popup__close')) || ((evt.target.classList.contains('popup')))) {\r\n      hidePopup(item);\r\n    }\r\n  });\r\n})\r\n\r\n// Слушаем submit в форме редактирования профиля\r\n\r\neditForm.addEventListener('submit', function(evt) {\r\n  evt.preventDefault();\r\n  editForm.elements['submit-button'].textContent = 'Сохранение...';\r\n  editProfile(nameInput, descrInput, apiConfig)\r\n  .then((data) => {\r\n    profileTitle.textContent = data.name;\r\n    profileDescr.textContent = data.about;\r\n    hidePopup(editItemPopup);\r\n  })      \r\n  .catch(handleError)\r\n  .finally(() => {        \r\n    changeSubmitButton(editItemPopup);  \r\n  })\r\n});\r\n\r\n// Слушаем submit в форме добавления карточки\r\n\r\naddForm.addEventListener('submit', addCard);\r\n\r\n// Слушаем submit в форме удаления карточки\r\n\r\ndeleteForm.addEventListener('submit', function(evt) {\r\n  evt.preventDefault();\r\n  deleteCard(modifiedCardId, apiConfig)\r\n  .then(() => {\r\n    deletePlace(modifiedCardTargetButton);\r\n    hidePopup(deleteItemPopup);\r\n  })\r\n  .catch(handleError)\r\n  .finally(() => {      \r\n    changeSubmitButton(deleteItemPopup);\r\n  })\r\n})\r\n\r\n// Слушаем submit в форме редактирования аватара\r\n\r\nchangeAvatarForm.addEventListener('submit', function(evt) {\r\n  const urlInput = changeAvatarForm.elements.link.value;\r\n  evt.preventDefault();\r\n  changeAvatarForm.elements['submit-button'].textContent = 'Сохранение...';\r\n  editAvatar(urlInput, apiConfig)\r\n  .then(() => {\r\n    profileImage.setAttribute('style', `background-image: url(${urlInput})`);\r\n    hidePopup(editAvatarPopup);\r\n  })\r\n  .catch(handleError)\r\n  .finally(() => {      \r\n    changeSubmitButton(editAvatarPopup);\r\n  })\r\n})\r\n\r\n// Слушаем клик на картинке аватара\r\n\r\nprofileImage.addEventListener('click', (evt) => {\r\n  changeAvatarForm.reset();\r\n  showPopup(editAvatarPopup);\r\n  clearValidation(changeAvatarForm, validationOptions);\r\n})\r\n\r\n// Слушаем клик на кнопке редактирования профиля\r\n\r\neditProfileButton.addEventListener('click', function() {\r\n  nameInput.value = profileTitle.textContent;\r\n  descrInput.value = profileDescr.textContent;\r\n  clearValidation(editForm, validationOptions);\r\n  showPopup(editItemPopup);\r\n})\r\n\r\n// Слушаем клик на кнопке добавления карточки\r\n  \r\naddCardButton.addEventListener('click', function() {\r\n  clearValidation(addForm, validationOptions);\r\n  addForm.reset();\r\n  showPopup(editItemAdd);\r\n})"],"names":["apiConfig","baseUrl","headers","authorization","id","validationOptions","formSelector","inputSelector","submitButtonSelector","inactiveButtonClass","inputErrorClass","errorClass","likeCard","likesNumber","evt","likeButton","target","nextElementSibling","textContent","classList","toggle","hidePopup","itemPopup","remove","document","removeEventListener","pushButtonListener","showPopup","popup","add","addEventListener","key","querySelector","clearValidation","formElement","formElements","getFormElements","list","forEach","inputElement","hideInputError","button","disabled","Array","from","querySelectorAll","errorElement","concat","handleResponse","res","ok","json","Promise","reject","status","config","editProfileButton","addCardButton","placesList","editItemPopup","editAvatarPopup","editItemAdd","deleteItemPopup","cardImagePopup","modifiedCardId","modifiedCardTargetButton","cardImage","cardCaption","profileTitle","profileDescr","profileImage","allPopups","addForm","forms","editForm","deleteForm","changeAvatarForm","nameInput","elements","name","descrInput","description","cardFunctions","delete","like","cardId","contains","fetch","method","then","catch","handleError","data","likes","length","sendLike","cardName","closest","src","alt","innerText","err","console","log","renderCard","item","arguments","undefined","cardElement","card","cardFunc","placeElement","content","cloneNode","deleteCardButton","link","result","_id","checkLike","owner","createCard","changeSubmitButton","setTimeout","submitButton","all","getCards","_ref","_ref2","getProfileData","getCardsData","about","setAttribute","avatar","validity","patternMismatch","setCustomValidity","dataset","errorMessage","valid","showInputError","validationMessage","isValid","inputList","buttonElement","some","hasInvalidInput","toggleButtonState","setEventListeners","enableValidation","preventDefault","namePr","descriptionPr","body","JSON","stringify","value","editProfile","finally","newCard","placeInput","urlInput","descr","sendCard","reset","deleteCard","deletePlace","editAvatar"],"sourceRoot":""}